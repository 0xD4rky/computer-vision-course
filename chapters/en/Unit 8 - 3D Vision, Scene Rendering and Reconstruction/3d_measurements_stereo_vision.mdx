# Introduction
This section explains how stereo vision works and how it can be used to find the 3 dimensional structure of surrounding objects. Stereo vision means capturing 2 or more images of the same scene from different locations and/or viewpoints. Images could be captured by using 2 or more cameras, or by moving the same camera.

# Problem statement 
Let's understand the problem statement of finding the 3D structure of objects by understanding the geometry of image formation. As shown in figure 1, we have a point P in 3D with x,y,z coordinates. Point P gets projected to the camera's image plane via the pinhole. This can also be viewed as projecting a 3D point to a 2D image plane. 

Now, let's say we are given this 2D image and location of the pixel coordinates of point P in this image. We would like to find the 3D coordinates of point P. Is this possible ? Is point P unique or are there other 3D points which also map to the same pixel coordinates as point P ? Answer is all 3D points which lie on the line joining point P and the pinhole will map to the same pixel coordinates in the 2D image plane. 

For finding the 3D structure of objects, this is the problem we are trying to solve. For our problem statement we can view an object in 3D as a collection of 3D points. Finding the 3D coordinates of each of these points helps us determine the 3D structure of the object.

# Solution 
Let's assume we are given the following information:

1. Single image of a scene point P
2. Pixel coordinates of point P in the image 
3. Position and orientation of the camera used to capture this image. For simplicity, we can also place a coordinate system xyz at the location of the pinhole, with z axis perpendicular to the image place and x,y axis parallel to the image plane like in figure 1.
4. Internal parameters of the camera such as focal length and location of principle point. Principle point is the point where the optical axis intersects the image plane, as shown in figure 2. It's location (Ox,Oy) is usually defined in pixel coordinates.

Using above information, we can find a line in 3D which starts at the pixel coordinates of point P (i.e projection of point P in the image plane), passes through the pinhole and extends to infinity. From the geometry of image formation, we also know that point P must lie somewhere on this line. 

1. Initially (without an image) point P could have been present anywhere in the 3D space. 
2. Using a single image, we reduced possible locations of point P to a single line in 3D. 
3. Now think if we can further reduce possible locations to find precise location of point P on this 3D line ? 
4. Imagine moving the camera to a different position. Let the coordinate system remain fixed at the previous position. The 3D line we found also remains the same and point P still lies somewhere on this line.
5. From this new location of the camera, capture another image of the same scene point P. Again using pixel coordinates of point P in this new image and the new location of the camera pinhole, find the line in 3D on which point P must be lie. 
6. Now we have 2 lines in 3D and point P lies somewhere on both these lines. So, point P must lie on the intersection of these 2 lines. 

Given 2 lines in 3D, there are are three possibilities for their intersection:

1. Intersect at exactly 1 point 
2. Intersect at infinite number of points 
3. Do not intersect 

If both images (with original and new camera positions) contain point P, then we know that 3D lines must intersect at atleast one point which is point P. 
Also, we can imagine both lines intersecting at infinite number of points only if the 2 lines are collinear which is possible if the pinhole at the new camera position lies on the original 3D line. 
For all other positions and orientations of the new camera location, the 2 lines in 3D must intersect at exactly 1 point, which is where point P lies. 

Therefore based on above reasoning, 1. using 2 images of the same scene point P, 2. known positions and orientations of the camera locations, 3. known internal parameters of the camera, we can precisely find where point P lies in the 3D space.

# Simplified Solution 
TBD

# Demo 
## Setup 
TBD

## Original Left and Right Images
TBD

## Rectified Left and Right Images 
TBD

## Annotated Left and Right Rectified Images
TBD

## 3D Coordinate Calculations  

| point    |   u_left  |   v_left  |   u_right  |   v_right  |   depth/z(cm)  |   x_wrt_left(cm)  |   y_wrt_left(cm)  |
|:--------:|:---------:|:---------:|:----------:|:----------:|:--------------:|:-----------------:|:-----------------:|
| pt1     |      138 |      219 |       102 |       219 |         94.36 |           -33.51 |            -5.53 |
| pt2     |      264 |      216 |       234 |       217 |        113.23 |            -8.72 |            -7.38 |
| pt3     |      137 |      320 |       101 |       321 |         94.36 |           -33.72 |            15.52 |
| pt4     |      263 |      303 |       233 |       302 |        113.23 |            -8.97 |            14.37 |
| pt5     |      307 |      211 |       280 |       211 |        125.81 |             2.26 |            -9.59 |
| pt6     |      367 |      212 |       339 |       212 |        121.32 |            18.25 |            -8.98 |
| pt7     |      305 |      298 |       278 |       298 |        125.81 |             1.71 |            14.58 |
| pt8     |      365 |      299 |       338 |       299 |        125.81 |            18.37 |            14.86 |
| pt9     |      466 |      225 |       415 |       225 |         66.61 |            24.58 |            -3.02 |
| pt10    |      581 |      225 |       530 |       226 |         66.61 |            41.49 |            -3.02 |
| pt11    |      464 |      387 |       413 |       388 |         66.61 |            24.29 |            20.81 |
| pt12    |      579 |      388 |       528 |       390 |         66.61 |            41.2  |            20.95 |


## Dimension Calculations and Accuracy 

| dimension    |   measured(cm)  |   actual(cm)  |       % error       |
|:------------:|:---------------:|:-------------:|:-------------------:|
| d1(1-2)     |           31.2 |         31.2 |               0    |
| d2(1-3)     |           21.1 |         21.3 |               0.94 |
| d3(5-6)     |           16.6 |         16.7 |               0.6  |
| d4(5-7)     |           24.2 |         24   |               0.83 |
| d5(9-10)    |           16.9 |         16.7 |               1.2  |
| d6(9-11)    |           23.8 |         24   |               0.83 |

## Observations 
TBD 

# Summary and Key Insights 
TBD

# References 
TBD